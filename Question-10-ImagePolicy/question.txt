Weight: 7%
Domain: Supply Chain Security (20%)
Difficulty: Medium-Hard

Context:
ImagePolicyWebhook is an admission controller that allows you to validate
container images against an external service before allowing pods to be created.

Task:
Configuration files are provided at /etc/kubernetes/epconfig/

1. Enable the `ImagePolicyWebhook` admission controller in the kube-apiserver:
   - Add `ImagePolicyWebhook` to `--enable-admission-plugins`
   - Set `--admission-control-config-file` to point to the admission config file

2. Edit the ImagePolicyWebhook configuration file to configure:
   - Set `defaultAllow` to `false` (deny images by default when webhook is unreachable)
   - Configure the `kubeConfigFile` path

3. Edit the kubeconfig file for the webhook backend:
   - Set the `server` URL to: https://image-policy-webhook.default.svc:443/image_policy
   - Ensure proper certificate configuration

4. Ensure the API server mounts the necessary volumes for the configuration files

Save copies to:
- /opt/course/10/admission-config.yaml
- /opt/course/10/kubeconfig.yaml
